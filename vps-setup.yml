---
- hosts: localhost
  become: true
  vars:
      ansible_python_interpreter: /usr/bin/python2
  tasks:
    - import_tasks: ./auth.yml         
    - import_tasks: ./pkgs/localhost_pkgs.yml 
    - pip: name=linode-python executable=/usr/bin/pip2
    - import_tasks: ./kill_node.yml    
    - import_tasks: ./make_node.yml

- hosts: "{{hostname}}"
  remote_user: root
  vars:
      password: 5HyYZiO07N3zE
      # password: $(openssl passwd -1 02ebrienm)
  tasks:
    - import_tasks: ./hostname.yml   
    - import_tasks: ./users.yml    
    - import_tasks: ./pkgs/core_pkgs.yml
    - import_tasks: ./pkgs/cran_pkgs.yml
    - import_tasks: ./pkgs/pip3_pkgs.yml

- hosts: "{{hostname}}"
  remote_user: "{{username}}"
  tasks:
    - import_tasks: ./pkgs/trizen.yml
    - import_tasks: ./pkgs/aur_pkgs.yml
    - import_tasks: ./cron.yml
    - import_tasks: ./enable.yml
      become: true
    - import_tasks: ./tarsnap.yml
    - import_tasks: ./dotfiles.yml
      #    - import_tasks: ./certbot.yml
      #      become: true
