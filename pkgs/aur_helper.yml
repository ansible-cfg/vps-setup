- name: Download package-query
  get_url:
    url: https://mir.archlinux.fr/releases/package-query/package-query-1.9.tar.gz
    dest: /home/martin/
    validate_certs: no

- name: Download yaourt
  get_url:
    url: https://github.com/archlinuxfr/yaourt/releases/download/1.9/yaourt-1.9.tar.gz
    dest: /home/martin/yaourt-1.9.tar.gz
    validate_certs: no

- name: Unarchive package-query
  unarchive:
    src: /home/martin/package-query-1.9.tar.gz
    dest: /home/martin
    remote_src: yes

- name: Unarchive yaourt
  unarchive:
    src: /home/martin/yaourt-1.9.tar.gz
    dest: /home/martin
    remote_src: yes

- name: Download package-query PKGBUILD
  get_url:
    url: https://aur.archlinux.org/cgit/aur.git/plain/PKGBUILD?h=package-query
    dest: /home/martin/package-query-1.9
    validate_certs: no

- name: Download package-query PKGBUILD
  get_url:
    url: https://aur.archlinux.org/cgit/aur.git/plain/PKGBUILD?h=yaourt
    dest: /home/martin/yaourt-1.9
    validate_certs: no

- name: make package-query
  shell: makepkg -f -s
  args:
    chdir: /home/martin/package-query-1.9
  remote_user: martin

- name: pacman package-query
  shell: pacman --noconfirm -U /home/martin/package-query-1.9/package-query-1.9-3-x86_64.pkg.tar.xz   

- name: make yaourt
  shell: makepkg -s
  args:
    chdir: /home/martin/yaourt-1.9
  remote_user: martin

- name: pacman yaourt
  shell: pacman --noconfirm -U /home/martin/yaourt-1.9/yaourt-1.9-1-any.pkg.tar.xz

- name: delete package-query 
  file:
    state: absent
    path: /home/martin/package-query-1.9

- name: delete package-query archive
  file:
    state: absent
    path: /home/martin/package-query-1.9.tar.gz

- name: delete yaourt archive
  file:
    state: absent
    path: /home/martin/yaourt-1.9

- name: delete yaourt
  file:
    state: absent
    path: /home/martin/yaourt-1.9.tar.gz
